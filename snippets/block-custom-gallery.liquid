<div class="gallery-container" {{ block.shopify_attributes }}>
    <div class="swiper-container gallery-main"> 
        <div class="swiper-buttons-wrapper">
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>
        </div>       
        <div class="swiper-wrapper">
            {%- for image in product.images -%}
                <div class="swiper-slide">
                    {{ image | image_url: width: 600 | image_tag: loading: 'lazy', class: 'custom-gallery__thumb' }}
                </div>
            {%- endfor -%}
        </div>
    </div>
    <div class="swiper-container gallery-thumbs">
        <div class="swiper-wrapper">
            {%- for image in product.images -%}
                <div class="swiper-slide">
                    {{ image | image_url: width: 120 | image_tag: loading: 'lazy', class: 'custom-gallery__thumb' }}
                </div>
            {%- endfor -%}
        </div>
    </div>
</div>
<style>
        .gallery-container {
            position: relative;
            width: 100%;
            display: flex;
            justify-content: space-between;
            overflow: hidden;
            padding-right: 5px;
            padding-bottom: 5px;
            flex-direction: row-reverse;
        }

        .gallery-main {
            width: calc( 100% - 100px);
            height: calc( 100vh - 160px );
            position: relative; /* needed for absolute positioning of buttons */
        }
        .gallery-main img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .gallery-main .swiper-slide {
            /* border: 3px solid #b592d4; */
            border-radius: 20px;
            overflow: hidden;
        }
        
        .gallery-main .swiper-buttons-wrapper {
            display: flex;
            align-items: center;
            justify-content: start;
            height: 50px;
            width: auto;
            position: absolute;
            z-index: 20;
            left: 0;
            top: 0;
        }
        .gallery-main .swiper-button-prev,
        .gallery-main .swiper-button-next {
            display: flex;
            position: unset;
            border: 0;
            height: auto;
            width: 20px;
            color: #C19B61;
            background: transparent;
            z-index: 50;
        }

        .gallery-main .swiper-button-prev::after,
        .gallery-main .swiper-button-next::after {
            font-size: 12px;
        }

        .gallery-main .swiper-button-prev {
            right: auto;
            border-right: 1px solid #e9e9e9;
            top: calc(50% - 25px);
        }

        .gallery-title {
            position: absolute;
            top: 15px;
            right: 15px;
            font-family: "Epilogue", sans-serif;
            font-size: 50px;
            font-weight: 700;
            text-align: right;
            text-transform: uppercase;
            text-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            color: #ffffff;
        }

        .swiper-slide-active .gallery-title {
            animation: slide-in 0.3s ease-in both;
        }

        .gallery-thumbs {
            order: -1;
            width: 80px;
            height: calc( 100vh - 160px );
            margin-right: 15px;
            padding-left: 15px;
        }
         .gallery-thumbs .swiper-slide {     
            border-radius: 5px;
            overflow: hidden;
         }   
        .gallery-thumbs .swiper-slide img {
            transition: 0.3s;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .gallery-thumbs .swiper-slide-active {
            opacity: 0.9;
        }

        .gallery-thumbs .swiper-slide-thumb-active {
            opacity: 1;
        }

        @keyframes slide-in {
            from {
                opacity: 0;
                right: -50%;
            }
        }
        @media screen and (max-width: 750px){
            .swiper-container {
                width: 100%;
                max-width: 100%;
                height: auto;
            }
            .gallery-thumbs {
                display: none !important;
            }
        }
</style>

<script>
    var galleryThumbs = new Swiper(".gallery-thumbs", {
            centeredSlides: true,
            centeredSlidesBounds: true,
            slidesPerView: 8,
            spaceBetween: 10,
            watchOverflow: true,
            watchSlidesVisibility: true,
            watchSlidesProgress: true,
            direction: 'vertical'
        });

        var galleryMain = new Swiper(".gallery-main", {
            watchOverflow: true,
            watchSlidesVisibility: true,
            watchSlidesProgress: true,
            preventInteractionOnTransition: true,
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            effect: 'fade',
            fadeEffect: {
                crossFade: true
            },
            thumbs: {
                swiper: galleryThumbs
            }
        });

        galleryMain.on('slideChangeTransitionStart', function () {
            galleryThumbs.slideTo(galleryMain.activeIndex);
        });

        galleryThumbs.on('transitionStart', function () {
            galleryMain.slideTo(galleryThumbs.activeIndex);
        });
</script>